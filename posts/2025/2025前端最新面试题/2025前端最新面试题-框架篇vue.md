---
articleGPT: 2025å‰ç«¯æœ€æ–°é¢è¯•é¢˜-æ¡†æ¶ç¯‡vue.md
title: 2025å‰ç«¯æœ€æ–°é¢è¯•é¢˜-æ¡†æ¶ç¯‡vue.md
description: 2025å‰ç«¯æœ€æ–°é¢è¯•é¢˜-æ¡†æ¶ç¯‡vue.md
date: 2025-02-28 17:12:00
tags: [æŠ€æœ¯åˆ†äº«, 2025å‰ç«¯æœ€æ–°é¢è¯•é¢˜, æ¡†æ¶ç¯‡vue]
categories: [æŠ€æœ¯åˆ†äº«]
---

# 2025å‰ç«¯æœ€æ–°é¢è¯•é¢˜-æ¡†æ¶ç¯‡vue.md

## 1. Vue2ã€Vue3 ç”Ÿå‘½å‘¨æœŸåŠå…¶é’©å­å‡½æ•°ç›¸å…³é¢è¯•é¢˜

![image-20240509192729016](./assets/2024å‰ç«¯æœ€æ–°é¢è¯•é¢˜-æ¡†æ¶ç¯‡vue/image-20240509192729016.png)



Vue2ã€Vue2 ä»æ•´ä½“ä¸Šæ¥è¯´éƒ½æ˜¯ 8ä¸ª ç”Ÿå‘½å‘¨æœŸï¼Œç½‘ä¸Šä¹Ÿæœ‰å¾ˆå¤šè¿™ä¹ˆè¯´ï¼Œä½†æ˜¯çœŸæ˜¯è¿™æ ·å—ï¼Ÿç¨åä¼šè®²åˆ°çš„



å·¦è¾¹ Vue2 - å³è¾¹ Vue3 `beforeï¼ˆåœ¨ ... ä¹‹å‰ï¼‰`

åˆ›å»ºå‰ -> åˆ›å»º   `beforeCreate` -> `created`     `beforeCreate` -> `created`

æŒ‚è½½å‰ -> æŒ‚è½½   `beforeMount` -> `mounted`      `beforeMount` -> ``mounted`      `

æ›´æ–°å‰ -> æ›´æ–°   `beforeUpdated` -> `update`     `beforeUpdated` -> `update`

é”€æ¯å‰ -> é”€æ¯   **`beforeDestroy`** -> **`destroy`**    **`beforeUnmount`** -> **`unmount`**



Vue3 æœ‰ä¸¤ç§ APIï¼Œç»„åˆå¼API å’Œ é€‰é¡¹å¼API

é”€æ¯é˜¶æ®µï¼ŒVue2çš„ `beforeDestroy`ã€`destroy` æ›¿æ¢æˆ `beforeUnmount`ã€`unmount`



å¥½ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸‹æ¯ä¸ªç”Ÿå‘½å‘¨æœŸéƒ½å¹²äº†ä»€ä¹ˆï¼Ÿ

**beforeCreate**

- åˆ›å»ºä¸€ä¸ªç©ºç™½çš„ Vue å®ä¾‹
- data method å°šæœªè¢«åˆå§‹åŒ–ï¼Œä¸å¯ä½¿ç”¨

**created**

- Vue å®ä¾‹åˆå§‹åŒ–å®Œæˆï¼Œå®Œæˆå“åº”å¼ç»‘å®š
- data method éƒ½åˆå§‹åŒ–å®Œæˆï¼Œå¯è°ƒç”¨
- å°šæœªå¼€å§‹æ¸²æŸ“æ¨¡æ¿

**beforeMount**

- ç¼–è¯‘æ¨¡æ¿ï¼Œè°ƒç”¨ render ç”Ÿæˆ vdom
- è¿˜æ²¡æœ‰å¼€å§‹æ¸²æŸ“ DOM

**mounted**

- å®Œæˆ DOM æ¸²æŸ“
- ç»„ä»¶åˆ›å»ºå®Œæˆ
- å¼€å§‹ç”± â€œåˆ›å»ºé˜¶æ®µâ€ è¿›å…¥ â€œè¿è¡Œé˜¶æ®µâ€

**beforeUpdate**

- data å‘ç”Ÿå˜åŒ–ä¹‹å
- å‡†å¤‡æ›´æ–° DOM (å°šæœªæ›´æ–° DOM)

**updated**

- data å‘ç”Ÿå˜åŒ–ï¼Œä¸” DOM æ›´æ–°å®Œæˆ
- ä¸è¦åœ¨ updated ä¸­ä¿®æ”¹ dataï¼Œå¯èƒ½ä¼šå¯¼è‡´æ­»å¾ªç¯ï¼ˆ updata ä¸­ä¿®æ”¹ dataï¼Œé‡æ–° updata, åˆä¿®æ”¹ data ï¼‰

**beforeDestroy/beforeUnmount**

- ç»„ä»¶è¿›å…¥é”€æ¯é˜¶æ®µï¼ˆå°šæœªé”€æ¯ï¼Œå¯æ­£å¸¸ä½¿ç”¨ï¼‰
- å¯ç§»é™¤ã€è§£ç»‘ä¸€äº›å…¨å±€äº‹ä»¶ã€è‡ªå®šä¹‰äº‹ä»¶

**destroy/unmounted**

- ç»„ä»¶è¢«é”€æ¯äº†
- æ‰€æœ‰å­ç»„ä»¶ä¹Ÿéƒ½è¢«é”€æ¯äº†



## 1.1 çˆ¶å­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåºæ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ

`created`ã€`mounted` çˆ¶å­ç»„ä»¶æ›´æ–°é¡ºåº (åˆ›å»ºã€æŒ‚è½½é˜¶æ®µ)

```javascript
created (çˆ¶)
created (å­)
mounted (å­)
mounted (çˆ¶)
```



`beforeUpdaate`ã€`update` çˆ¶å­ç»„ä»¶æ›´æ–°é¡ºåº (æ›´æ–°é˜¶æ®µ)

```javascript
beforeUpdaate (çˆ¶)
beforeUpdaate  (å­)
update (å­)
parent update (çˆ¶)
```



`beforeDestroy`ã€`destroy` çˆ¶å­ç»„ä»¶æ›´æ–°é¡ºåº (é”€æ¯é˜¶æ®µ)

```javascript
beforeDestroy (çˆ¶)
beforeDestroy (å­) 
destroy (å­)
destroy (çˆ¶)
```



> **å°ç»“**
>
> ä»ä¸Šé¢çš„ä¾‹å­ä¸éš¾çœ‹å‡ºï¼Œçˆ¶å­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œéƒ½æ˜¯å‘ˆç° çˆ¶åœ¨å¤–å±‚ï¼Œå­åœ¨å†…å±‚ çš„ç»“æ„
>
> çˆ¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ— è®ºæ˜¯å“ªä¸ªç”Ÿå‘½å‘¨æœŸï¼Œéƒ½æ˜¯ç”±**çˆ¶ç»„ä»¶å…ˆå¼€å§‹ï¼Œç„¶åå­ç»„ä»¶å†å¼€å§‹ï¼Œç›´åˆ°å­ç»„ä»¶ç»“æŸï¼Œçˆ¶ç»„ä»¶æ‰ç»“æŸ**ã€‚



æ¥ä¸‹æ¥æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸ªç‰¹æ®Šçš„ç»„ä»¶ ` <keep-alive>`ï¼Œç¼“å­˜ç»„ä»¶ï¼Œæœ€å¸¸è§çš„å°±æ˜¯åœ¨åšé¡µé¢æƒé™æ§åˆ¶ï¼ˆ`keep-alive` å®é™…å¼€å‘ä¸­è¿ç”¨åœºæ™¯ï¼‰æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦å®šä¹‰è¿™æ ·ä¸€ä¸ªç¼“å­˜ç»„ä»¶ã€‚

```javascript
<div class="app-main">
    <router-view v-slot="{ Component, route }">
      <transition name="fade-transform" mode="out-in">
        <keep-alive>
          <component :is="Component" :key="route.fullPath" />
        </keep-alive>
      </transition>
    </router-view>
</div>
```

`keep-alive` ç»„ä»¶ç”Ÿå‘½å‘¨æœŸï¼ˆ`created`ä¸­åªåˆ›å»ºä¸€æ¬¡ï¼Œä¸éš¾ç†è§£ï¼Œéƒ½è¢«ç¼“å­˜äº†ï¼Œå½“ç„¶å°±ä¸ä¼šå†è¢«åˆ›å»ºäº†å˜›ï¼‰

- `onActivated` ç¼“å­˜ç»„ä»¶è¢«æ¿€æ´»
- `onDeactivated` ç¼“å­˜ç»„ä»¶è¢«éšè—



## 1.2 Vue2ã€Vue3ã€React ä¸‰è€… diff ç®—æ³•æœ‰ä½•åŒºåˆ«ï¼Ÿ

diff ç®—æ³•

- diff ç®—æ³•å¾ˆæ—©å°±æœ‰

- diff ç®—æ³•åº”ç”¨å¹¿æ³›ï¼Œä¾‹å¦‚ github çš„ Pull Request ä¸­çš„ä»£ç  diff

- å¦‚æœè¦ä¸¥æ ¼ diff ä¸¤æ£µæ ‘ï¼Œæ—¶é—´å¤æ‚åº¦ O(n^3)ï¼Œä¸å¯ç”¨

  

Tree diff çš„ä¼˜åŒ–ï¼Œä¼˜åŒ–åæ—¶é—´å¤æ‚åº¦é™ä¸º O(n)

- åªæ¯”è¾ƒåŒä¸€å±‚çº§ï¼Œä¸è·¨çº§æ¯”è¾ƒ
- tag ä¸åŒåˆ™åˆ é™¤é‡å»º (ä¸å†å»æ¯”è¾ƒå†…éƒ¨çš„ç»†èŠ‚)
- å­èŠ‚ç‚¹é€šè¿‡ key åŒºåˆ† (key çš„é‡è¦æ€§)



å­¦ä¹ æŠ€å·§

- diff ç®—æ³•éå¸¸å¤æ‚ï¼Œä¸è¦æ·±ç©¶ç»†èŠ‚
- æ—¢ç„¶æ˜¯ä¸‰è€…çš„æ¯”è¾ƒï¼Œè¯´å‡ºä»–ä»¬æœ€å¤§çš„ä¸åŒå³å¯



React diff - ä»…å³ç§»



Vue2 - åŒç«¯æ¯”è¾ƒï¼ˆå‡å°‘ç§»åŠ¨å¼€é”€ï¼‰



Vue3 - æœ€é•¿é€’å¢å­åºåˆ—ï¼ˆå‡å°‘ DOM æ“ä½œï¼‰



> diff ç®—æ³•åŸç†çš„æ ¸å¿ƒåœ¨äº å‡å°‘ DOM æ“ä½œ



è¿ç¯é—®

Vue React ä¸ºä½•å¾ªç¯æ—¶å¿…é¡»ä½¿ç”¨ key ?

- vdom diff ç®—æ³•ä¼šæ ¹æ® key åˆ¤æ–­å…ƒç´ æ˜¯å¦åˆ é™¤ï¼Ÿ
- åŒ¹é…äº† key, åˆ™åªç§»åŠ¨å…ƒç´  - æ€§èƒ½è¾ƒå¥½
- ä¸ºåŒ¹é… key, åˆ™åˆ é™¤é‡å»º - æ€§èƒ½è¾ƒå·®



## 2. ç»„ä»¶ä¼ å€¼

| ç»„ä»¶é—´ä¼ å€¼æ–¹å¼ | Vue2                       | Vue3                            |
| -------------- | -------------------------- | ------------------------------- |
| çˆ¶å­ä¼ å€¼       | props/$emit                | props/emit                      |
| å…„å¼Ÿä¼ å€¼       | EventBus                   | mitt(å®˜æ–¹æ’ä»¶) æ˜¯ eventbus æ’ä»¶ |
| å¤šå±‚ä¼ å€¼       | provide/injectï¼ˆä¾èµ–æ³¨å…¥ï¼‰ | provide/injectï¼ˆä¾èµ–æ³¨å…¥ï¼‰      |
| å…¨å±€çŠ¶æ€       | vuex                       | pinia                           |



>è·å–å­ç»„ä»¶å±æ€§ä¸æ–¹æ³•ï¼šref
>
>è·å–çˆ¶ç»„ä»¶å±æ€§ä¸æ–¹æ³•ï¼š$parent



## 3. Vuex ä¸ Pinia çš„åŒºåˆ«ï¼Ÿ

vuexæœ‰5ä¸ªå±æ€§è€Œpiniaåªæœ‰3ä¸ªï¼Œæ²¡æœ‰modulesä¸mutationï¼Œè€Œä¸” pinia å¯ä»¥ä½¿ç”¨ç»„åˆå¼API

- vuexï¼š
  - state: å­˜æ”¾æ•°æ®æºçš„åœ°æ–¹
  - getters: è®¡ç®—æ•°æ®ï¼ˆç›¸å½“äºstateçš„è®¡ç®—å±æ€§ï¼‰
  - mutationï¼šåŒæ­¥ï¼Œå”¯ä¸€èƒ½ä¿®æ”¹stateæ•°æ®æºçš„åœ°æ–¹
  - actionsï¼šå¼‚æ­¥
  - modulesï¼šæ¨¡å—åŒ–
- piniaï¼š
  - stateï¼šæ•°æ®å­˜æ”¾åœ°
  - actionsï¼šå¼‚æ­¥ï¼ˆå‰¯ä½œç”¨æ“ä½œï¼‰
  - getters: è®¡ç®—æ•°æ®ï¼ˆç›¸å½“äºstateçš„è®¡ç®—å±æ€§ï¼‰

Pinia ä½“ç§¯æ›´å°ï¼ˆæ€§èƒ½æ›´å¥½ï¼‰ã€‚

Pinia å¯ä»¥ç›´æ¥ä¿®æ”¹ state é‡Œçš„æ•°æ®ï¼Œè€Œ vuex åªèƒ½é€šè¿‡ mutation ä¸­å»ä¿®æ”¹ã€‚

è™½ç„¶ Pinia å»é™¤äº† mutationsï¼Œä½†ä¸ºäº†å…¼å®¹æ€§ï¼Œä»ç„¶å¯ä»¥ä½¿ç”¨ mutations æ¥ä¿®æ”¹ state



**ã€æ‰©å±•ã€‘**

1. Vuex ä¸­ mutaion å’Œ action åŒºåˆ«ï¼Ÿ

   - `mutation` æ˜¯æ”¹å˜ Vuex store ä¸­çŠ¶æ€çš„åŒæ­¥æ–¹æ³•ï¼Œè€Œ action åˆ™æ˜¯å¤„ç†å¼‚æ­¥æ“ä½œå¹¶æœ€ç»ˆé€šè¿‡ mutation æ¥æ”¹å˜çŠ¶æ€çš„æœºåˆ¶

2. Vuex å¦‚ä½•å®ç°æŒä¹…åŒ–ï¼Ÿ Pinia å¦‚ä½•å®ç°æŒä¹…åŒ–ï¼Ÿ

   1. Vuex

      - æœ¬åœ°ç¼“å­˜ `localStorage` (`localStorage` å¤§å°ä¸ç¡®å®šï¼Œ`cookie` 4kB)

      - ç¬¬ä¸‰æ–¹æ’ä»¶ `vuex-persistedstate`

   2. Pinia

      - `pinia-plugin-persistedstate`

3. åˆ·æ–°é¡µé¢ vuex æ•°æ®ä¸ºä»€ä¹ˆä¼šä¸¢å¤±ï¼Ÿ

   åœ¨vueé¡¹ç›®ä¸­ä½¿ç”¨vuexæ¥åšå…¨å±€çš„çŠ¶æ€ç®¡ç†ï¼Œå½“åˆ·æ–°ç½‘é¡µåï¼Œä¿å­˜åœ¨vuexå®ä¾‹storeé‡Œçš„æ•°æ®ä¼šä¸¢å¤±ã€‚è¿™æ˜¯å› ä¸ºstoreé‡Œçš„æ•°æ®æ˜¯ä¿å­˜åœ¨è¿è¡Œå†…å­˜ä¸­çš„ï¼Œå½“é¡µé¢åˆ·æ–°æ—¶ï¼Œé¡µé¢ä¼šé‡æ–°åŠ è½½vueå®ä¾‹ï¼Œstoreé‡Œé¢çš„æ•°æ®å°±ä¼šè¢«é‡æ–°èµ‹å€¼åˆå§‹åŒ–ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥å°†stateçš„æ•°æ®ä¿å­˜åœ¨ localstorage ä¸­ï¼Œè¿™æ ·å³ä½¿é¡µé¢åˆ·æ–°ï¼Œæ•°æ®ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚

4. Vuex ä¸»è¦æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ

   - `stateã€gettersã€mutationã€actionsã€modules`

5. è®²ä¸€ä¸‹ Vuex å•å‘æ•°æ®æµï¼Ÿ æˆ–è€…è¯´ä¸ºä»€ä¹ˆ Vuex ä»–æ˜¯ä¸€ä¸ªå•å‘æ•°æ®æµï¼Ÿ

   - ç»„ä»¶ -> dispatch -> Actions -> commit -> Mutations -> ä¿®æ”¹ State -> ç»„ä»¶æ¸²æŸ“
   - å› ä¸ºï¼ŒVuex å°±æ˜¯è®¾è®¡äº†è¿™æ ·çš„ä¸€ä¸ªæ•°æ®æµå‘ï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸€ä¸ªå•å‘æ•°æ®æµ

![vuex](./assets/2024å‰ç«¯æœ€æ–°é¢è¯•é¢˜-æ¡†æ¶ç¯‡vue/vuex-1723558840837-3.png)	

>cookie: 4kb
>
>localstoryï¼šæ°¸ä¹…å­˜å‚¨
>
>sessionStorageï¼šæµè§ˆå™¨å…³é—­æ¸…ç©º





## 5. ä½ å°è£…è¿‡å“ªäº›ç»„ä»¶ï¼Ÿ

å› ä¸ºå…¬å¸è¦ UI è®¾è®¡çš„ä¸€å¥—å¼¹çª—ç»„ä»¶

æˆ‘ä»¬æ ¹æ®éœ€æ±‚ï¼ŒäºŒæ¬¡å°è£… å¯¹è¯æ¡†ç»„ä»¶ã€æ¶ˆæ¯æç¤ºç»„ä»¶ï¼Œé™¤äº†æ ·å¼å¤–ï¼Œå°±æ˜¯éœ€è¦å¯æ‹–æ‹½ã€æœ‰äºŒæ¬¡å¼¹çª—æç¤ºç­‰åŠŸèƒ½

è¿˜æœ‰å°±æ˜¯å°è£…äº†ï¼Œåå°ç®¡ç†ç³»ç»Ÿçš„æœç´¢ã€ç­›é€‰ç»„ä»¶ï¼Œé€šè¿‡ JSON é…ç½®å°±èƒ½å¿«é€Ÿæ­å»º



## 6. main.js ä¸­ new Vue() vs createApp()ï¼Ÿ

**API å˜åŒ–**

`new Vue()` æ˜¯åŸºäº `Options API`

`createApp()` æ˜¯åŸºäº `Composition API`



**åº”ç”¨å®ä¾‹çš„éš”ç¦»**

`createApp()`åˆ›å»ºçš„åº”ç”¨å®ä¾‹å…·æœ‰å®Œå…¨éš”ç¦»çš„ç¯å¢ƒï¼Œæ¯ä¸ªå®ä¾‹æ‹¥æœ‰ç‹¬ç«‹çš„å“åº”å¼ç³»ç»Ÿå’Œå…¨å±€å±æ€§

`new Vue()`åˆ›å»ºçš„å®ä¾‹ä¸åŒï¼Œåè€…å…±äº«åŒä¸€ä¸ªå…¨å±€ä¸Šä¸‹æ–‡



## 7. Vue3 ä¸ºä»€ä¹ˆå¯ä»¥å¤šä¸ªçˆ¶èŠ‚ç‚¹ï¼Ÿ

`Vue3` å¯ä»¥æœ‰å¤šä¸ªçˆ¶èŠ‚ç‚¹ï¼Œä¸»è¦æ˜¯å› ä¸ºå¼•å…¥äº†æ–°çš„ç»„ä»¶æ¦‚å¿µ - `Fragment`

`Fragment` å…è®¸åœ¨ä¸€ä¸ªæ¨¡æ¿ä¸­æ¸²æŸ“å¤šä¸ªæ ¹èŠ‚ç‚¹ï¼Œè¿™æ ·å°±ä¸éœ€è¦ä¸ºæ¯ä¸ªç»„ä»¶å•ç‹¬åˆ›å»ºä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œä»è€Œå‡å°‘äº†ä¸å¿…è¦çš„æ ‡ç­¾å…ƒç´ ã€‚



## 8. å¹³æ—¶ç”¨è¿‡ Vue3 çš„ hooks å—ï¼Ÿæœ‰å†™è¿‡ hooks?



æˆ‘ä»ä¸¤æ–¹é¢è®²å§ï¼Œä¸€ä¸ªä»å¹³æ—¶å¸¸è§ä¸šåŠ¡ã€ç‰¹æ®Šä¸šåŠ¡



**å¸¸è§ä¸šåŠ¡ï¼š**

hooks åœ¨å†™ Vue3 çš„æ—¶å€™ä½¿ç”¨æ¯”è¾ƒå¤šï¼Œå¹³æ—¶ä¸€äº›ä¸šåŠ¡åŠŸèƒ½çš„è¯ï¼Œæ¯”å¦‚é˜²æŠ–ã€èŠ‚æµã€è¯·æ±‚çš„é”™è¯¯é‡è¯•ã€çŠ¶æ€ä¸è¯·æ±‚ä¸€ä½“åŒ–

å°±ç”¨ä¸€äº›å¼€æºçš„ hooks åº“ï¼Œæ¯”å¦‚ useVueï¼Œè¿™æ ·å»å®ç°



**ç‰¹æ®Šä¸šåŠ¡ï¼š**

æ¯”å¦‚ï¼Œå›½é™…åŒ–ã€æ¢è‚¤ã€Echartså›¾è¡¨ è¿™äº›åŠŸèƒ½å°±ä¼šä½¿ç”¨è‡ªå®šä¹‰ hooks è¿›è¡Œå®ç°



- åˆ†é¡µ hooksï¼Œåå°ç®¡ç†æœ‰å¾ˆå¤š tableï¼Œé‚£ä¸å¯é¿å…å°±è¦å†™å¾ˆå¤šåˆ†é¡µå‡½æ•°ï¼Œå°è£…ä¸€ä¸ªåˆ†é¡µ hooks å°±ä¸éœ€è¦æ¯æ¬¡å†™ä¸€æ¬¡åˆ†é¡µåŠŸèƒ½
- è¯·æ±‚ hooksï¼Œå‡å°‘



[ã€Vue3ã€‘å¦‚ä½•å°è£…ä¸€ä¸ªè¶…çº§å¥½ç”¨çš„ Hook - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7299849645206781963?searchId=2024102723180924A990B2718890B97934)



ã€æ³¨æ„ã€‘

hooks å¯¼å…¥å¯¹è±¡ï¼Œä¸€èˆ¬ä½¿ç”¨ toRefs å¯¼å‡ºï¼Œè¿™æ ·åšçš„åŸå› æ˜¯å¯ä»¥äº§ç”Ÿæ‰¹é‡çš„å¯ä»¥è§£æ„çš„ Ref å¯¹è±¡ï¼Œä»¥å…åœ¨è§£æ„è¿”å›å€¼æ—¶å¤±å»å“åº”æ€§



> vue3 çš„ hook åº“ [VueUse](https://vueuse.org/)



## 9. watch ä¸ computed

**watch ä¸ computed çš„åŒºåˆ«ï¼Ÿ**

1. watch æ”¯æŒå¼‚æ­¥ï¼Œcomputed ä¸æ”¯æŒå¼‚æ­¥ï¼ˆâ­â­â­ï¼‰
2. watch ç›‘å¬ä¸€ä¸ªå€¼å˜åŒ–ï¼Œæ‰§è¡Œå…¶ä»–æ“ä½œï¼Œcomputed ç›‘å¬ä¾èµ–å…¶ä»–å±æ€§ï¼Œå†å»æ‰§è¡Œå…¶ä»–æ“ä½œ
3. watch å¯ä»¥æ¥æ”¶æ–°æ—§ä¸¤ä¸ªå€¼
4. computed å±æ€§æ˜¯å‡½æ•°æ—¶ï¼Œéƒ½æœ‰ get å’Œ set æ–¹æ³•ï¼Œé»˜è®¤èµ° get æ–¹æ³•ï¼Œget å¿…é¡»æœ‰è¿”å›å€¼
5. watch æ²¡æœ‰ç¼“å­˜ï¼Œcomputed æœ‰ç¼“å­˜ï¼ˆâ­â­â­ï¼‰



**watch ä¸ computed å“ªä¸ªå…ˆæ‰§è¡Œï¼Ÿ**

è¦æ ¹æ®å®é™…æƒ…å†µè€Œå®š

ä¸€èˆ¬æƒ…å†µä¸‹ computed å…ˆäº watch æ‰§è¡Œ

å½“ watch æ·»åŠ äº† immediate: true çš„æƒ…å†µä¸‹ï¼ˆåœ¨ç»„ä»¶æŒ‚è½½å®Œæˆåï¼Œä¼šç«‹å³è§¦å‘ä¸€æ¬¡å›è°ƒå‡½æ•°ï¼Œè€Œä¸ç®¡è¢«ç›‘å¬çš„æ•°æ®æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ï¼‰ï¼Œwatch å…ˆäº computed å…ˆæ‰§è¡Œ

ç”¨æˆ·äº¤äº’å¯¼è‡´æ•°æ®å˜åŒ–çš„æƒ…å†µï¼Œå…ˆè§¦å‘ watch å†è§¦å‘ computed



**watch å’Œ computedï¼Œé‚£ä¸ªç”¨çš„æ¯”è¾ƒå¤šï¼Œå¹³æ—¶æœ‰å“ªäº›åœ°æ–¹ç”¨åˆ°ï¼Ÿ**

watch ç”¨çš„æ¯”è¾ƒå¤šï¼Œçˆ¶å­ç»„ä»¶ä¼ å€¼çš„æ—¶å€™ï¼Œç”¨äºç›‘å¬çˆ¶ä¼ å­ä¸­å€¼çš„å˜åŒ–ï¼Œå¹¶ä½œå‡ºå˜åŒ–



## 10. Vue2ã€Vue3 çš„å“åº”å¼åŸç†æ˜¯ä»€ä¹ˆï¼ŸVue3 çš„å“åº”å¼è§£å†³ Vue2 çš„å“ªäº›ç—›ç‚¹ï¼Ÿ

Vue2 çš„å“åº”å¼åŸç†

åŸºäº`Object.defineProperty ()`æ–¹æ³•æ¥å®ç°çš„ã€‚é€šè¿‡å®ƒæ¥åŠ«æŒ `data` ä¸­å¯¹è±¡çš„ `getter` å’Œ `setter` æ–¹æ³•ï¼Œå¹¶åœ¨è¯»å–å’Œä¿®æ”¹çš„æ—¶å€™è§¦å‘æ›´æ–°æœºåˆ¶



Vue3 çš„å“åº”å¼åŸç†

`Proxy` å¯¹æ•°æ®å®ç° `getter/setter` ä»£ç†ï¼Œä»è€Œå®ç°å“åº”å¼æ•°æ®ï¼Œ



Vue3 è§£å†³äº† Vue2 çš„ç—›ç‚¹

1. å¯¹è±¡å±æ€§æ–°å¢åˆ é™¤æ— æ³•æ£€æµ‹ï¼Œè§†å›¾æ— æ³•æ›´æ–°
   1. åŸå› ï¼š`object.defineProerty` åªèƒ½ç›‘å¬å·²å­˜åœ¨çš„å±æ€§ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒVue2 é‡‡ç”¨ `$set` æ–¹æ³•è¿›è¡Œæ‰‹åŠ¨ç›‘å¬
2. æ— æ³•é€šè¿‡æ•°ç»„ç´¢å¼•ç›´æ¥èµ‹å€¼
   1. åŸå› ï¼š`object.defineProerty` æ— æ³•ç›´æ¥æ–°å¢æ•°ç»„ç´¢å¼•ï¼Œè§£å†³åŠæ³•å°±æ˜¯ Vue2 é‡å†™äº†æ•°ç»„çš„æ“ä½œæ–¹æ³•ã€‚



[é¢è¯•å®˜çš„æ­¥æ­¥ç´§é€¼ï¼šVue2 å’Œ Vue3 çš„å“åº”å¼åŸç†æ¯”å¯¹åœ¨é¢è¯•ä¸­éš¾å…ä¼šè¢«é—®åˆ° Vue2 å’Œ Vue3 çš„ç›¸å…³çŸ¥è¯†ç‚¹çš„å® - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7124351370521477128#heading-7)

[é¢è¯•å®˜ï¼šVue2 é‡å†™äº†æ•°ç»„æ–¹æ³•ï¼Œä½ çŸ¥é“ Vue3 ä¹Ÿé‡å†™äº†å—ï¼Ÿ æˆ‘ï¼šçœŸå½“æˆ‘æ²¡çœ‹è¿‡æºç å•Šï¼ŸğŸ˜… - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/689466591)



> ã€æ‰©å±•ã€‘js ä¸­çš„ getã€set

`get` è¿™ä¸ªå±æ€§, åœ¨ ES5 ä¸­å°±æœ‰äº†, æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ `get`ã€`set` æ–¹æ³•

`get` å…³é”®å­—å°†å¯¹è±¡å±æ€§ä¸å‡½æ•°è¿›è¡Œç»‘å®š, å½“å±æ€§è¢«è®¿é—®æ—¶, å¯¹åº”å‡½æ•°è¢«æ‰§è¡Œ

```typescript
const obj = {
log: ['example','test'],
get latest() {
 if (this.log.length == 0) return undefined;
 return this.log[this.log.length - 1];
}
}
console.log(obj.latest);  // è¾“å‡ºï¼š"test"
```

`set` å…³é”®å­—å°†å¯¹è±¡å±æ€§ä¸å‡½æ•°è¿›è¡Œç»‘å®šï¼Œå½“æ”¹å˜å±æ€§å€¼æ—¶ï¼Œå¯¹åº”å‡½æ•°è¢«æ‰§è¡Œ

```typescript
const language = {
log: []
set current(name) {
 this.log.push(name);
}
};

language.current = 'EN';
language.current = 'FA';

console.log(language.log); // expected output: Array ["EN", "FA"]
```



## 11. åŒå‘æ•°æ®ç»‘å®šçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ

`v-model`æœ¬è´¨å°±æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå¯ä»¥çœ‹æˆæ˜¯`value + input`æ–¹æ³•çš„è¯­æ³•ç³–

å¯ä»¥é€šè¿‡ `model` å±æ€§çš„`prop`å’Œ`event`å±æ€§æ¥è¿›è¡Œè‡ªå®šä¹‰

åŸç”Ÿçš„ `v-model`ï¼Œä¼šæ ¹æ®æ ‡ç­¾çš„ä¸åŒç”Ÿæˆä¸åŒçš„äº‹ä»¶å’Œå±æ€§



## 12. hook ä¸ mixins æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

hooks æ˜¯ Vue3 ä¸­æ‰æœ‰çš„

mixins æ˜¯ Vue2 ä¸­æœ‰çš„

mixins ä¸ hooks çš„ä½œç”¨éƒ½æ˜¯ä¸ºäº†æŠ½ç¦»ä¸€äº›å…¬å…±çš„åŠŸèƒ½



mixins çš„å¼Šç«¯æœ‰ä¸¤ç‚¹

1. ç»„ä»¶çš„dataã€methodsã€filtersä¼šè¦†ç›–mixinsé‡Œçš„åŒådataã€methodsã€filters

2. å˜é‡æ¥æºä¸æ˜ç¡®ï¼ˆéšå¼ä¼ å…¥ï¼‰ï¼Œä¸åˆ©äºé˜…è¯»ï¼Œä½¿ä»£ç å˜å¾—éš¾ä»¥ç»´æŠ¤



## 13. hook å‡½æ•° ä¸ æ™®é€šå‡½æ•°çš„åŒºåˆ«ï¼Ÿ



å¦‚æœä¸€ä¸ªå‡½æ•°åŒ…å«äº†ä¸€ä¸ªèƒ½å¼•èµ·è§†å›¾å˜åŒ–çš„å˜é‡ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸€ä¸ª hook å‡½æ•°ï¼Œåä¹‹æ˜¯ æ™®é€šå‡½æ•°ï¼Œ

åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šå‘ç°ä¸€äº›å¯ä»¥é‡å¤åˆ©ç”¨çš„ä»£ç æ®µï¼Œäºæ˜¯æˆ‘ä»¬å°†å…¶å°è£…æˆå‡½æ•°ä»¥ä¾›è°ƒç”¨ï¼Œ

è¿™ç±»å‡½æ•°åŒ…æ‹¬å·¥å…·å‡½æ•°ï¼Œä½†æ˜¯åˆä¸æ­¢å·¥å…·å‡½æ•°ï¼Œå› ä¸ºæˆ‘ä»¬å¯èƒ½ä¹Ÿä¼šå°è£…ä¸€äº›é‡å¤çš„ä¸šåŠ¡é€»è¾‘ã€‚



ä»¥å¾€ï¼Œåœ¨å‰ç«¯åŸç”Ÿå¼€å‘ä¸­ï¼Œæˆ‘ä»¬å°è£…çš„è¿™äº›å‡½æ•°éƒ½æ˜¯â€œæ— çŠ¶æ€â€çš„ï¼Œ

ä¸ºäº†å»ºç«‹æ•°æ®ä¸è§†å›¾ä¹‹é—´çš„è”ç³»ï¼ŒåŸºäº MVC æ¶æ„çš„ React æ¡†æ¶å’ŒåŸºäº MVVM çš„ Vue æ¡†æ¶éƒ½å¼•å…¥äº†â€œçŠ¶æ€â€è¿™ä¸€æ¦‚å¿µï¼Œ

çŠ¶æ€æ˜¯ç‰¹æ®Šçš„ JavaScript å˜é‡ï¼Œå®ƒçš„å˜åŒ–ä¼šå¼•èµ·è§†å›¾çš„å˜åŒ–ã€‚



åœ¨è¿™ç±»æ¡†æ¶ä¸­ï¼Œå¦‚æœä¸€ä¸ªå˜é‡çš„å˜åŒ–ä¸ä¼šå¼•èµ·è§†å›¾çš„å˜åŒ–ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯æ™®é€šå˜é‡ï¼Œå¦‚æœä¸€ä¸ªå˜é‡å·²ç»è¢«æ¡†æ¶æ³¨å†Œä¸ºçŠ¶æ€ï¼Œ

é‚£ä¹ˆè¿™ä¸ªå˜é‡çš„å˜åŒ–å°±ä¼šå¼•å‘è§†å›¾çš„å˜åŒ–ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºå“åº”å¼å˜é‡ã€‚å¦‚æœä¸€ä¸ªå‡½æ•°åŒ…å«äº†çŠ¶æ€ï¼ˆå“åº”å¼å˜é‡ï¼‰ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸€ä¸ª Hook å‡½æ•°ã€‚



> åœ¨å…·å¤‡â€œçŠ¶æ€â€çš„æ¡†æ¶çš„åŸºç¡€ä¸Šï¼Œæ‰æœ‰ Hook è¿™ä¸€è¯´ã€‚Hook å‡½æ•°ä¸æ™®é€šå‡½æ•°çš„æœ¬è´¨åŒºåˆ«åœ¨äºæ˜¯å¦å…·å¤‡â€œçŠ¶æ€â€ã€‚



## 14. è°ˆä¸€è°ˆä½ å¯¹ vue-router çš„ç†è§£

### Vue Router æœ‰å“ªäº›ç‰¹ç‚¹ï¼Ÿ(äº†è§£)

1. åµŒå¥—è·¯ç”±ï¼šVue Router æ”¯æŒåµŒå¥—è·¯ç”±ï¼Œå¯ä»¥å°†ä¸€ä¸ªè·¯ç”±æ˜ å°„åˆ°å¤šä¸ªç»„ä»¶ä¸­ï¼Œå®ç°ç»„ä»¶çš„å¤ç”¨ã€‚
2. è·¯ç”±å‚æ•°ï¼šVue Router æ”¯æŒè·¯ç”±å‚æ•°ï¼Œå¯ä»¥é€šè¿‡è·¯ç”±å‚æ•°æ¥ä¼ é€’æ•°æ®ã€‚
3. è·¯ç”±å¯¼èˆªï¼šVue Router æä¾›äº†è·¯ç”±å¯¼èˆªåŠŸèƒ½ï¼Œå¯ä»¥åœ¨è·¯ç”±è·³è½¬å‰è¿›è¡Œæ‹¦æˆªå’Œå¤„ç†ã€‚
4. è·¯ç”±æ‡’åŠ è½½ï¼šVue Router æ”¯æŒè·¯ç”±æ‡’åŠ è½½ï¼Œå¯ä»¥æŒ‰éœ€åŠ è½½è·¯ç”±å¯¹åº”çš„ç»„ä»¶ï¼Œå‡å°‘é¦–å±åŠ è½½æ—¶é—´ã€‚
5. åŠ¨æ€è·¯ç”±ï¼šVue Router æ”¯æŒåŠ¨æ€è·¯ç”±ï¼Œå¯ä»¥æ ¹æ®ä¸åŒçš„è·¯ç”±å‚æ•°åŠ¨æ€ç”Ÿæˆè·¯ç”±ã€‚
6. å¯¼èˆªå®ˆå«ï¼šVue Router æä¾›äº†å¯¼èˆªå®ˆå«åŠŸèƒ½ï¼Œå¯ä»¥åœ¨è·¯ç”±è·³è½¬å‰ã€è·³è½¬åã€è·³è½¬å–æ¶ˆæ—¶è¿›è¡Œæ‹¦æˆªå’Œå¤„ç†ã€‚
7. HTML5 History æ¨¡å¼å’Œ Hash æ¨¡å¼ï¼šVue Router æ”¯æŒ HTML5 History æ¨¡å¼å’Œ Hash æ¨¡å¼ï¼Œå¯ä»¥æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ¨¡å¼ã€‚



### Vue Router ä¸­çš„è·¯ç”±æ¨¡å¼æœ‰å“ªäº›ï¼Ÿ

hashã€history

åŒºåˆ«: 

**Hashæ¨¡å¼**

1. **URLç»“æ„**ï¼šåœ¨URLä¸­å¸¦æœ‰â€œ#â€ç¬¦å·ï¼Œä¾‹å¦‚`[http://example.com](http://example.com)  #/è·¯çº¿`ã€‚
2. **å®ç°æ–¹å¼**ï¼šé€šè¿‡åœ¨URLåæ·»åŠ å“ˆå¸Œå€¼ï¼ˆå³#åé¢çš„éƒ¨åˆ†ï¼‰æ¥æ¨¡æ‹Ÿä¸€ä¸ªå®Œæ•´çš„URLã€‚å½“URLçš„å“ˆå¸Œå€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒVue Routerä¼šæ ¹æ®å“ˆå¸Œå€¼çš„å˜åŒ–æ¥åŒ¹é…ç›¸åº”çš„è·¯ç”±å¹¶å±•ç¤ºç›¸åº”çš„ç»„ä»¶ã€‚
3. ç‰¹ç‚¹
   - ä¸éœ€è¦æœåŠ¡å™¨æ”¯æŒï¼Œç›´æ¥åœ¨å®¢æˆ·ç«¯å¤„ç†è·¯ç”±å˜åŒ–ã€‚
   - å¯ä»¥åˆ©ç”¨æµè§ˆå™¨çš„`hashchange`äº‹ä»¶æ¥æ£€æµ‹è·¯ç”±å˜åŒ–ã€‚
   - åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¦‚ä½¿ç”¨æœåŠ¡å™¨ç«¯æ¸²æŸ“`ï¼ˆSSRï¼‰`ï¼Œå¯èƒ½ä¼šé‡åˆ°å…¼å®¹æ€§é—®é¢˜ã€‚

**Historyæ¨¡å¼**

1. **URLç»“æ„**ï¼šä¸å¸¦â€œ#â€ç¬¦å·ï¼Œä¾‹å¦‚`[http://example.com](http://example.com)  è·¯çº¿`ã€‚
2. **å®ç°æ–¹å¼**ï¼šåˆ©ç”¨HTML5çš„` history.pushState ()` å’Œ `history.replaceState ()` æ–¹æ³•æ¥åœ¨æµè§ˆå™¨çš„å†å²è®°å½•æ ˆä¸­æ·»åŠ æˆ–æ›´æ–°è®°å½•ã€‚è¿™äº›æ“ä½œä¸ä¼šè§¦å‘é¡µé¢çš„é‡æ–°åŠ è½½ï¼Œå› æ­¤å¯ä»¥å®ç°çœŸæ­£çš„æ— åˆ·æ–°å¯¼èˆªã€‚
3. ç‰¹ç‚¹
   - éœ€è¦æœåŠ¡å™¨çš„æ”¯æŒï¼Œé€šå¸¸éœ€è¦é…ç½®Nginxç­‰ä»£ç†æœåŠ¡å™¨æ¥æ­£ç¡®å¤„ç†è·¯ç”±å˜åŒ–ã€‚
   - æ›´ç¬¦åˆç°ä»£Webåº”ç”¨çš„ä½¿ç”¨ä¹ æƒ¯ï¼Œç”¨æˆ·ä½“éªŒæ›´å¥½ï¼Œå› ä¸ºç”¨æˆ·åœ¨åœ°å€æ çœ‹åˆ°çš„æ˜¯ç®€æ´çš„è·¯å¾„è€Œä¸æ˜¯å¸¦æœ‰å“ˆå¸Œå€¼çš„URLã€‚
   - å¯ä»¥å®Œå…¨é¿å…æµè§ˆå™¨çš„`hashchange`äº‹ä»¶ï¼Œå› æ­¤åœ¨æ‰€æœ‰ç°ä»£æµè§ˆå™¨ä¸Šéƒ½èƒ½æ­£å¸¸å·¥ä½œã€‚

åº”ç”¨åœºæ™¯

1. æœ‰äº›ç¬¬ä¸‰æ–¹åº”ç”¨è·¯ç”±è·³è½¬, ä¸å…è®¸å¸¦ #ï¼Œ`history` æ¨¡å¼
2. éœ€è¦ `SEO` ä¼˜åŒ–ï¼Œä¹Ÿå¯ä½¿ç”¨ `history` æ¨¡å¼



> é¡¹ç›®é€šå¸¸ä½¿ç”¨ä»€ä¹ˆè·¯ç”±æ¨¡å¼ï¼š



### Vue Router ä¸­çš„è·¯ç”±é’©å­å‡½æ•°æœ‰å“ªäº›ï¼Ÿ

Vue Router ä¸­çš„è·¯ç”±é’©å­å‡½æ•°åŒ…æ‹¬å…¨å±€é’©å­å‡½æ•°å’Œç»„ä»¶å†…çš„é’©å­å‡½æ•°ï¼Œå…·ä½“å¦‚ä¸‹ï¼š

1. **å…¨å±€é’©å­å‡½æ•°**ï¼š
   - `beforeEach`ï¼šåœ¨ä»»æ„è·¯ç”±è·³è½¬å‰éƒ½ä¼šè¢«è°ƒç”¨ï¼Œé€šå¸¸ç”¨äºç™»å½•éªŒè¯ç­‰æ“ä½œã€‚
   - `afterEach`ï¼šåœ¨è·¯ç”±è·³è½¬å®Œæˆåè°ƒç”¨ã€‚
   - `beforeResolve`ï¼šåœ¨è§£æå¼‚æ­¥ç»„ä»¶æ—¶è°ƒç”¨ã€‚
2. **å•ä¸€è·¯ç”±é’©å­å‡½æ•°**ï¼š
   - `beforeEnter`ï¼šä»…åœ¨è·¯ç”±è·³è½¬åˆ°è¯¥è·¯ç”±æ—¶è°ƒç”¨ã€‚
3. **ç»„ä»¶å†…é’©å­å‡½æ•°**ï¼š
   - `beforeRouteEnter`ï¼šåœ¨è·¯ç”±è¿›å…¥å‰è°ƒç”¨ï¼Œç”¨äºåˆå§‹åŒ–æ•°æ®ã€‚
   - `beforeRouteUpdate`ï¼šåœ¨è·¯ç”±æ›´æ–°æ—¶è°ƒç”¨ï¼Œç”¨äºå¤„ç†æ•°æ®å˜åŒ–ã€‚
   - `beforeRouteLeave`ï¼šåœ¨è·¯ç”±ç¦»å¼€å‰è°ƒç”¨ï¼Œç”¨äºæ¸…ç†èµ„æºã€‚

è¿™äº›é’©å­å‡½æ•°æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š`to`ï¼ˆç›®æ ‡è·¯ç”±å¯¹è±¡ï¼‰ã€`from`ï¼ˆå½“å‰è·¯ç”±å¯¹è±¡ï¼‰å’Œ`next`ï¼ˆç”¨äºæ§åˆ¶è·¯ç”±è·³è½¬æµç¨‹çš„å‡½æ•°ï¼‰ã€‚`next`å‡½æ•°çš„è°ƒç”¨æ–¹å¼å†³å®šäº†é’©å­å‡½æ•°çš„æ‰§è¡Œæµç¨‹ï¼Œä¾‹å¦‚ï¼Œ`next()`ä¼šç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªé’©å­å‡½æ•°æˆ–å¯¼èˆªï¼Œè€Œ`next(false)`åˆ™ä¼šä¸­æ–­å½“å‰çš„å¯¼èˆªã€‚



### Vue Router ä¸­çš„è·¯ç”±æ‡’åŠ è½½æ˜¯ä»€ä¹ˆ?

å¦‚ä½•å®ç°ï¼Ÿ

å°†è·¯ç”±è·¯å¾„æ”¹ä¸º è¿”å› import() å‡½æ•°çš„å‡½æ•°å³å¯

```javascript
const Foo = () => import('./Foo.vue')
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨è·¯ç”±æ‡’åŠ è½½æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿ Webpack å·²ç»æ­£ç¡®åœ°é…ç½®äº†ä»£ç åˆ†å‰²å’ŒæŒ‰éœ€åŠ è½½çš„ç›¸å…³é…ç½®ï¼Œä»¥ç¡®ä¿èƒ½å¤Ÿæ­£ç¡®åœ°è¿›è¡Œä»£ç åˆ†å‰²å’ŒæŒ‰éœ€åŠ è½½ã€‚åœ¨ Vue CLI ä¸­ï¼Œé»˜è®¤å·²ç»é…ç½®å¥½äº†è·¯ç”±æ‡’åŠ è½½å’Œä»£ç åˆ†å‰²çš„ç›¸å…³é…ç½®ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨é¡¹ç›®ä¸­ä½¿ç”¨è·¯ç”±



### Vue Router ä¸­çš„å¯¼èˆªå®ˆå«æœ‰å“ªäº›ï¼Œå®ƒä»¬çš„æ‰§è¡Œé¡ºåºæ˜¯æ€æ ·çš„ï¼Ÿ

Vue Router ä¸­çš„å¯¼èˆªå®ˆå«æœ‰ä¸‰ç§ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ `å…¨å±€å®ˆå«`ã€`å•ä¸ªè·¯ç”±ç‹¬äº«å®ˆå«` å’Œ `ç»„ä»¶çº§å®ˆå«`ã€‚

å®ƒä»¬çš„æ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š

1. å…¨å±€å‰ç½®å®ˆå«ï¼ˆ`beforeEach`ï¼‰ï¼šåœ¨è¿›å…¥æ¯ä¸ªè·¯ç”±ä¹‹å‰æ‰§è¡Œã€‚
2. è·¯ç”±ç‹¬äº«å®ˆå«ï¼ˆ`beforeEnter`ï¼‰ï¼šåœ¨è¿›å…¥æ–°è·¯ç”±æ—¶æ‰§è¡Œï¼Œä½†ä¸ä¼šç­‰å¾…å…¶è§£æå®Œæˆå°±ç»§ç»­æ‰§è¡Œåç»­çš„å¯¼èˆªã€‚
3. ç»„ä»¶å†…å®ˆå«ï¼ˆå¦‚ `beforeRouteEnter`ã€`beforeRouteUpdate`ã€`beforeRouteLeave`ï¼‰ï¼šåœ¨ç»„ä»¶æ¿€æ´»æˆ–æ›´æ–°æˆ–ç¦»å¼€æ—¶æ‰§è¡Œã€‚
4. å…¨å±€åç½®å®ˆå«ï¼ˆ`afterEach`ï¼‰ï¼šåœ¨å®Œæˆè·¯ç”±è·³è½¬åæ‰§è¡Œã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœåœ¨å¯¼èˆªå®ˆå«ä¸­è°ƒç”¨äº† `next` æ–¹æ³•ï¼Œåˆ™ä¼šè¿›å…¥ä¸‹ä¸€ä¸ªå®ˆå«ã€‚å¦‚æœæ²¡æœ‰è°ƒç”¨ `next`ï¼Œåˆ™å¯¼èˆªä¼šè¢«ä¸­æ–­ã€‚å¦‚æœæƒ³è¦é‡å®šå‘åˆ°ä¸€ä¸ªä¸åŒçš„åœ°å€ï¼Œå¯ä»¥åœ¨ `next` æ–¹æ³•ä¸­ä¼ å…¥ä¸€ä¸ªæ–°çš„è·¯å¾„ã€‚

ä¸‹é¢æ˜¯ `beforeEach` é’©å­å‡½æ•°çš„ä¸€ä¸ªå®Œæ•´ç¤ºä¾‹ï¼š

```javascript
router.beforeEach((to, from, next) => {
  // ...
  next(); // è¿›å…¥ä¸‹ä¸€ä¸ªå®ˆå«
});
```

åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å¯¼èˆªå®ˆå«æ¥è¿›è¡Œæƒé™æ§åˆ¶ã€è·¯ç”±æ‹¦æˆªã€é¡µé¢è·³è½¬ç­‰æ“ä½œã€‚

è·¯ç”±å®ˆå«ä¾èµ–äºé’©å­å‡½æ•°æ¥å®Œæˆå…¶ä»»åŠ¡ã€‚



### å¦‚ä½•åœ¨ Vue Router ä¸­ä¼ é€’å‚æ•°ï¼Ÿ

åœ¨ Vue Router ä¸­ï¼Œå¯ä»¥é€šè¿‡è·¯ç”±è·¯å¾„ä¸­çš„å ä½ç¬¦æ¥ä¼ é€’å‚æ•°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ `query` å’Œ `params` å±æ€§æ¥ä¼ é€’å‚æ•°ã€‚

1. ä½¿ç”¨è·¯ç”±è·¯å¾„ä¸­çš„å ä½ç¬¦æ¥ä¼ é€’å‚æ•°

   å¯ä»¥åœ¨è·¯ç”±è·¯å¾„ä¸­ä½¿ç”¨å†’å· `:` å®šä¹‰å ä½ç¬¦ï¼Œç„¶ååœ¨è·¯ç”±è·³è½¬æ—¶é€šè¿‡ä¼ é€’å‚æ•°æ¥å¡«å……å ä½ç¬¦ã€‚ä¾‹å¦‚ï¼š

   ```javascript
   const router = new VueRouter({
     routes: [
       {
         path: '/user/:id',
         name: 'user',
         component: User
       }
     ]
   })
   ```

   åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè·¯ç”±è·¯å¾„ä¸­ä½¿ç”¨äº† `:id` å ä½ç¬¦è¡¨ç¤ºç”¨æˆ·çš„ idï¼Œå½“æˆ‘ä»¬è¿›è¡Œè·¯ç”±è·³è½¬æ—¶ï¼Œå¯ä»¥é€šè¿‡ä¼ é€’å‚æ•°æ¥æ›¿æ¢è¿™ä¸ªå ä½ç¬¦ï¼š

   ```javascript
   router.push({ name: 'user', params: { id: 123 }})
   ```

   åœ¨è·¯ç”±ç»„ä»¶ä¸­å¯ä»¥é€šè¿‡ `$route.params` è®¿é—®åˆ°ä¼ é€’çš„å‚æ•°ï¼Œä¾‹å¦‚ï¼š

   ```javascript
   export default {
     computed: {
       userId() {
         return this.$route.params.id
       }
     }
   }
   ```

2. ä½¿ç”¨ `query` å’Œ `params` å±æ€§æ¥ä¼ é€’å‚æ•°

   å¯ä»¥åœ¨è·¯ç”±è·³è½¬æ—¶é€šè¿‡ `query` å’Œ `params` å±æ€§æ¥ä¼ é€’å‚æ•°ã€‚ä¾‹å¦‚ï¼š

   ```javascript
   router.push({ path: '/user', query: { id: 123 }})
   ```

   åœ¨è·¯ç”±ç»„ä»¶ä¸­å¯ä»¥é€šè¿‡ `$route.query` è®¿é—®åˆ°ä¼ é€’çš„å‚æ•°ï¼Œä¾‹å¦‚ï¼š

   ```javascript
   export default {
     computed: {
       userId() {
         return this.$route.query.id
       }
     }
   }
   ```

   `query` å’Œ `params` çš„åŒºåˆ«åœ¨äºï¼Œ`query` ä¼ é€’çš„å‚æ•°ä¼šè¢«æ·»åŠ åˆ° URL ä¸­ï¼Œè€Œ `params` ä¼ é€’çš„å‚æ•°ä¸ä¼šå‡ºç°åœ¨ URL ä¸­ï¼Œå› æ­¤ `params` æ›´é€‚åˆä¼ é€’ä¸€äº›æ•æ„Ÿä¿¡æ¯ã€‚



### Vue Router ä¸­çš„åµŒå¥—è·¯ç”±æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•å®ç°ï¼Ÿ

Vue Router ä¸­çš„åµŒå¥—è·¯ç”±å¯ä»¥è®©æˆ‘ä»¬åœ¨ä¸€ä¸ªè·¯ç”±ä¸‹é¢ï¼Œå†å®šä¹‰å¤šä¸ªå­è·¯ç”±ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ `/user` è·¯ç”±ä¸‹é¢ï¼Œå®šä¹‰ `/user/profile` å’Œ `/user/posts` ä¸¤ä¸ªå­è·¯ç”±ã€‚

å®ç°åµŒå¥—è·¯ç”±çš„æ­¥éª¤å¦‚ä¸‹ï¼š

1. åœ¨çˆ¶è·¯ç”±ä¸‹é¢å®šä¹‰å­è·¯ç”±ï¼Œå¯ä»¥ä½¿ç”¨ `children` å­—æ®µæ¥å®šä¹‰å­è·¯ç”±ï¼Œä¾‹å¦‚ï¼š

   ```javascript
   const router = new VueRouter({
     routes: [
       {
         path: '/user',
         component: User,
         children: [
           {
             path: 'profile',
             component: UserProfile
           },
           {
             path: 'posts',
             component: UserPosts
           }
         ]
       }
     ]
   })
   ```

2. åœ¨çˆ¶ç»„ä»¶ä¸­æ·»åŠ  `<router-view>` æ ‡ç­¾ï¼Œç”¨äºæ¸²æŸ“å­ç»„ä»¶ã€‚ä¾‹å¦‚ï¼š

   ```html
   <template>
     <div>
       <h2>User Page</h2>
       <router-view></router-view>
     </div>
   </template>
   ```

3. åœ¨å­ç»„ä»¶ä¸­å¯ä»¥é€šè¿‡ `$route` è®¿é—®åˆ°çˆ¶è·¯ç”±å’Œå­è·¯ç”±çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š

   ```javascript
   export default {
     computed: {
       userId() {
         return this.$route.params.id
       }
     }
   }
   ```

   åœ¨å­ç»„ä»¶ä¸­ä¹Ÿå¯ä»¥é€šè¿‡ `$route` è®¿é—®åˆ°å½“å‰å­è·¯ç”±çš„ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š

   ```javascript
   export default {
     computed: {
       postId() {
         return this.$route.params.postId
       }
     }
   }
   ```

   åœ¨è®¿é—®å­è·¯ç”±æ—¶ï¼Œéœ€è¦åœ¨çˆ¶è·¯ç”±çš„è·¯å¾„åé¢æ·»åŠ å­è·¯ç”±çš„è·¯å¾„ï¼Œä¾‹å¦‚ `/user/profile` å’Œ `/user/posts`ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒVue Router ä¸­çš„åµŒå¥—è·¯ç”±å¯ä»¥æ— é™åµŒå¥—ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨æ—¶è¦æ³¨æ„è·¯ç”±çš„å±‚çº§å…³ç³»ï¼Œä»¥å…å‡ºç°æ··æ·†å’Œé”™è¯¯ã€‚



### Vue Router ä¸­çš„åŠ¨æ€è·¯ç”±æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•å®ç°ï¼Ÿ

åŠ¨æ€è·¯ç”±ä¸»è¦é€šè¿‡ä¸¤ä¸ªå‡½æ•°å®ç°ã€‚`router.addRoute()` å’Œ `router.removeRoute()`ã€‚å®ƒä»¬åªæ³¨å†Œä¸€ä¸ªæ–°çš„è·¯ç”±ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæ–°å¢åŠ çš„è·¯ç”±ä¸å½“å‰ä½ç½®ç›¸åŒ¹é…ï¼Œå°±éœ€è¦ä½ ç”¨ `router.push()` æˆ– `router.replace()` æ¥**æ‰‹åŠ¨å¯¼èˆª**ï¼Œæ‰èƒ½æ˜¾ç¤ºè¯¥æ–°è·¯ç”±ã€‚



### Vue Router ä¸­çš„å‘½åè·¯ç”±æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•ä½¿ç”¨ï¼Ÿ

```javascript
const routes = [
  {
    path: '/user/:username',
    name: 'user',
    component: User,
  },
]
```

è¦é“¾æ¥åˆ°ä¸€ä¸ªå‘½åçš„è·¯ç”±ï¼Œå¯ä»¥å‘ `router-link` ç»„ä»¶çš„ `to` å±æ€§ä¼ é€’ä¸€ä¸ªå¯¹è±¡ï¼š



```html
<router-link :to="{ name: 'user', params: { username: 'erina' }}">
  User
</router-link>
```

è¿™è·Ÿä»£ç è°ƒç”¨ `router.push()` æ˜¯ä¸€å›äº‹ï¼š



```javascript
router.push({ name: 'user', params: { username: 'erina' } })
```

åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œè·¯ç”±å°†å¯¼èˆªåˆ°è·¯å¾„ `/user/erina`ã€‚



## 15. å¦‚ä½•å–æ¶ˆè¯·æ±‚ï¼Ÿ

`AxiosV0.22.0` å‰ä½¿ç”¨ `CancelToken` å–æ¶ˆè¯·æ±‚

`AxiosV0.22.0` åä½¿ç”¨ `AbortController` å–æ¶ˆè¯·æ±‚ï¼Œ`AbortController` ä¸æ­¢å¯ä»¥å–æ¶ˆè¯·æ±‚ï¼Œè¿˜å¯ä»¥å–æ¶ˆç›‘å¬



[axioså–æ¶ˆè¯·æ±‚æ€»ç»“åº”ç”¨åœºæ™¯ å–æ¶ˆè¯·æ±‚åœ¨å‰ç«¯æœ‰æ—¶å€™ä¼šç”¨åˆ°ï¼Œä»¥ä¸‹æ˜¯ä¸¤ä¸ªå·¥ä½œä¸­å¯èƒ½ä¼šç”¨åˆ°çš„åœºæ™¯ tabåˆ‡æ¢æ—¶åˆ·æ–°æŸä¸ªåˆ—è¡¨æ•° - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7153831304042119198?searchId=202408132328240728351B277373A79459)

[ä½¿ç”¨ AbortController ç»ˆæ­¢ fetch è¯·æ±‚åœ¨ç°åœ¨çš„æµè§ˆå™¨ä¸­ï¼Œæœ‰ä¸¤ç§ä¸»è¦çš„æ–¹æ³•å‘é€è¯·æ±‚ï¼šXML - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/6844904072051425293?searchId=202408141022472A2F16170BD0D057BCDF)



## 16. æ’æ§½

- æ’å€¼ã€è¡¨è¾¾å¼
- æŒ‡ä»¤ã€åŠ¨æ€å±æ€§
- v-html: ä¼šæœ‰ XSS é£é™©, ä¼šè¦†ç›–å­ç»„ä»¶

```vue
<!-- ä»£ç æ¼”ç¤º -->
<template>
	<div>
        <p>æ–‡æœ¬æ’å€¼ {{ message }}</p>
        <p>JS è¡¨è¾¾å¼ {{ flag ? 'yes' : 'no' }}</p>
        <P :id="dynamicId">åŠ¨æ€å±æ€§</P>
        <p v-html="rawHtml">
            <span>ã€æ³¨æ„ã€‘ä½¿ç”¨ v-html ä¹‹å, å°†ä¼šè¦†ç›–å­å…ƒç´  (ä¹Ÿå°±æ˜¯ span ä¸­çš„å†…å®¹ä¼šè¢«è¦†ç›–)</span>
    	</p>
    </div>
</template>
<script>
export default {
    data() {
        return {
            message: 'hello vue',
            flag: true,
            rawHtml: 'æŒ‡ä»¤ - åŸå§‹ html <b>åŠ ç²—</b> <i>æ–œä½“</i>',
            dynamicId: 'id-${Date.now()}'
        }
    }
}
</script>
```

```vue
<!-- æ’æ§½çš„ä½¿ç”¨ (å…·åæ’æ§½) -->
<!-- çˆ¶ç»„ä»¶ -->
<template>
	<div>
     <å­ç»„ä»¶>
    	<template v-slot:a>a</template>
			<template v-slot:b>b</template>
			<template v-slot:c>c</template>
    	</å­ç»„ä»¶>
    </div>
</template>
<!-- å­ç»„ä»¶ -->
<template>
	<div class="list-content">
        <slot name="a"></slot>
        <slot name="b"></slot>
        <slot name="c"></slot>
    </div>
</template>
```

```vue
<!-- æ’æ§½çš„ä½¿ç”¨ (ä½œç”¨åŸŸæ’æ§½) -->
<!-- å­ç»„ä»¶ -->
<template>
  <div class="child">
    <slot 
        name="heading" 
        v-bind:headingValue="heading">
        {{heading}}
    </slot>
    <!-- ä¸ºäº†è®©å¤§å®¶çœ‹çš„æ›´æ¸…æ¥š å·²ç»å°†Child.vueç»„ä»¶ä¸­å¤šä½™çš„å†…å®¹åˆ é™¤ --> 
  </div>
</template>
<script>
export default {
  name: 'Child',
  data() {
    return {
        heading: 'è¿™é‡Œæ˜¯é»˜è®¤çš„heading'
    }
  }
}
</script>
<!-- çˆ¶ç»„ä»¶ -->
<template>
  <div id="app">
    <child>
      <template v-slot:heading="slotValue" >
        <h1>element-uiç»„ä»¶</h1>
        slotValue = {{slotValue}}
      </template>
    </child>
  </div>
</template>
```



> [æ‰©å±•] - [Vueä¸­çš„æ’æ§½ç”¨æ³•ï¼šé»˜è®¤æ’æ§½ã€å…·åæ’æ§½ã€ä½œç”¨åŸŸæ’æ§½)](https://juejin.cn/post/7208015274079469627)





## 17. v-model æ˜¯è°çš„è¯­æ³•ç³–?

`v-model='message'` è¯­æ³•ç³–æœ¬è´¨ä¸Šå¯ä»¥ä¿®æ”¹ä¸º

```vue
<child :value="message" @input="function(e){message = e}"></child>
```

åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œ `v-model='foo'` ç­‰ä»·äº `:value='foo'` åŠ ä¸Š `@input='foo=$event'`



## 18. æŒ‡ä»¤

**Vue æœ‰å“ªäº›æŒ‡ä»¤?**

 v-textã€v-htmlã€v-showã€v-ifã€v-elseã€v-else-ifã€v-forã€v-onã€v-bindã€v-modelã€v-slotã€v-preã€v-cloakã€v-once



**Vue è‡ªå®šä¹‰æŒ‡ä»¤?**

- é€šè¿‡ Vue.directive() å‡½æ•°æ³¨å†Œä¸€ä¸ªå…¨å±€çš„æŒ‡ä»¤

- é€šè¿‡ç»„ä»¶çš„ directives å±æ€§ï¼Œå¯¹è¯¥ç»„ä»¶æ·»åŠ ä¸€ä¸ªå±€éƒ¨çš„æŒ‡ä»¤

```javascript
// å…¨å±€
Vue.directive('self_defined_name',{
  bind:function(el,binding){
  //do someting
  },
  inserted: function(el,binding){
  //do something
  },
}

// å±€éƒ¨
new Vue({
  el:'#app',
  directives:{
    self_defined_name1:{
        bind:function(el,binding){
           //do something
        }
        inserted:function(el,binding){
           //do something
        },
     }
  }
})              
```

```vue
<!-- ä½¿ç”¨ -->
<div id="app">
    <div v-self_defined_name1="{ color: 'green', text: 'èœé¸Ÿæ•™ç¨‹!' }"></div>
</div>
```













